---
title: gitä»£ç æäº¤è§„èŒƒ
---

# git ä»£ç æäº¤è§„èŒƒ

å¹³æ—¶è‡ªå·±å†™ä»£ç çš„æ—¶å€™ï¼Œæ¯å½“éœ€è¦æäº¤ä»£ç åˆ° GitHub çš„æ—¶å€™ï¼Œæˆ‘ä¸€èˆ¬çš„æ“ä½œæ˜¯ç›´æ¥`git commit 'xxxx'`ï¼Œç„¶åç›´æ¥å°±æ¨é€äº†ï¼Œåæ¥é¡¹ç›®å˜å¾—ç¨å¾®æœ‰ç‚¹å¤§äº†ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–å°ä¼™ä¼´åŠ å…¥äº†é¡¹ç›®çš„å¼€å‘ï¼Œä»–ä»¬ç»™æˆ‘é¡¹ç›®ä»“åº“æäº¤ä»£ç ï¼Œé•¿æ—¶é—´ä¹‹åå»çœ‹ä»–ä»¬çš„æäº¤ï¼Œç”šè‡³éƒ½ä¸çŸ¥é“ä»–ä»¬å¹²äº†å•¥ï¼Œè¿™å°±å¾ˆå°´å°¬äº†ã€‚æ‰€ä»¥ git çš„æäº¤å¿…é¡»è¦è§„èŒƒæ‰è¡Œï¼Œå°¤å…¶æ˜¯åœ¨å¤šäººåä½œçš„é¡¹ç›®ä¸­ï¼Œå¦‚æœ Git çš„æäº¤è¯´æ˜ç²¾å‡†ï¼Œåœ¨åæœŸåä½œä»¥åŠåæœŸ review ä¼šå˜å¾—æœ‰æ®å¯æŸ¥ï¼Œé¡¹ç›®çš„å¼€å‘å¯ä»¥æ ¹æ®è§„èŒƒçš„æäº¤è¯´æ˜å¿«é€Ÿç”Ÿæˆå¼€å‘æ—¥å¿—ï¼Œä»è€Œæ–¹ä¾¿å¼€å‘è€…æˆ–ç”¨æˆ·è¿½è¸ªé¡¹ç›®çš„å¼€å‘ä¿¡æ¯å’ŒåŠŸèƒ½ç‰¹æ€§ã€‚ <!-- more -->

## commit message

æˆ‘ä»¬æ¯ä¸€æ¬¡æäº¤å¿…å®šæ˜¯æœ‰ç‰¹æ®Šçš„è¡Œä¸ºï¼Œæˆ–æ˜¯å¼€å‘æ–°åŠŸèƒ½ã€æˆ–æ˜¯ä¿®å¤ bug ç­‰ç­‰ã€‚æˆ‘ä»¬é’ˆå¯¹ä¸åŒçš„æ“ä½œæœ‰å¦‚ä¸‹çš„åˆ†ç±»ï¼š

- type: commit çš„ç±»å‹
- feat: å¼€å‘æ–°çš„åŠŸèƒ½
- fix: ä¿®å¤ bug
- refactor: ä»£ç é‡æ„
- docs: æ–‡æ¡£ä¿®æ”¹
- style: ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹
- test: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹
- perf: æ”¹å–„æ€§èƒ½
- build: å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–ï¼ˆä¾‹å¦‚ scopes: webpackã€gulpã€npm ç­‰ï¼‰
- chore: å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ„å»ºæµç¨‹, ä¾èµ–ç®¡ç†.
- revert: ä»£ç å›é€€

è€Œ commit çš„æ ¼å¼ä¹Ÿæœ‰æ ‡å‡†æ ¼å¼:

- scope: commit å½±å“çš„èŒƒå›´, æ¯”å¦‚: route, component, utils, build...
- subject: commit çš„æ¦‚è¿°
- body: commit å…·ä½“ä¿®æ”¹å†…å®¹
- footer: ä¸€äº›å¤‡æ³¨, é€šå¸¸æ˜¯ BREAKING CHANGE æˆ–ä¿®å¤çš„ bug çš„é“¾æ¥.

## AngularJS æäº¤è§„èŒƒ

Angular çš„æäº¤è§„èŒƒæ˜¯ç›®å‰ä¸šç•Œå†…è®¤å¯åº¦å’Œæ™®åŠåº¦æœ€é«˜çš„ï¼Œæˆ‘ä»¬é‡‡ç”¨`commitizen`å’Œ`cz-customizable`æ¥å®ç°è§„èŒƒæäº¤ã€‚è¿™ä¸¤ä¸ªå·¥å…·å¯ä»¥æ ¹æ®ä½ çš„é€‰æ‹©è‡ªåŠ¨ç”Ÿæˆæäº¤ä¿¡æ¯ï¼Œç„¶åæ„‰å¿«çš„æäº¤ã€‚
å®‰è£…`commitizen`å’Œ`cz-customizable`:

```js
 npm install -D commitizen
 npm install -D cz-customizable
```

åœ¨`package.json`ä¸­é…ç½® config.commitizen å­—æ®µï¼Œé…ç½® cz å·¥å…·çš„é€‚é…å™¨è·¯å¾„:

```json
  "config": {
   "commitizen": {
     "path": "node_modules/cz-customizable"
   }
 }
```

åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º`.cz-config.js`:

```js
   'use strict'
   module.exports = {
   types: [
       {
       value: 'featâœ¨'
       name: 'âœ¨  feat:     A new feature'
       },
       {
       value: 'fixğŸ',
       name: 'ğŸ  fix:      A bug fix'
       },
       {
       value: 'refactorğŸ› ',
       name:
           'ğŸ›   refactor: A code change that neither fixes a bug nor adds a feature'
       },
       {
       value: 'docsğŸ“š',
       name: 'ğŸ“š  docs:     Documentation only changes'
       },
       {
       value: 'testğŸ',
       name: 'ğŸ  test:     Add missing tests or correcting existing tests'
       },
       {
       value: 'choreğŸ—¯',
       name:
           "ğŸ—¯  chore:    Changes that don't modify src or test files. Such as updating build tasks, package manager"
       },
       {
       value: 'styleğŸ’…',
       name:
           'ğŸ’…  style:    Code Style, Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)'
       },
       {
       value: 'revertâª',
       name: 'âª  revert:   Revert to a commit'
       }
   ],

   scopes: [],

   allowCustomScopes: true,
   allowBreakingChanges: ['feat', 'fix']
   }
```

å¯¹åº”çš„ä¸­æ–‡ç‰ˆæœ¬ï¼š

```js
module.exports = {
  types: [
    { value: "featâœ¨", name: "ç‰¹æ€§: ä¸€ä¸ªæ–°çš„ç‰¹æ€§" },
    { value: "fixğŸ", name: "ä¿®å¤: ä¿®å¤ä¸€ä¸ªBug" },
    { value: "docsğŸ“š", name: "æ–‡æ¡£: å˜æ›´çš„åªæœ‰æ–‡æ¡£" },
    { value: "styleğŸ’…", name: "æ ¼å¼: ç©ºæ ¼, åˆ†å·ç­‰æ ¼å¼ä¿®å¤" },
    { value: "refactorğŸ› ", name: "é‡æ„: ä»£ç é‡æ„ï¼Œæ³¨æ„å’Œç‰¹æ€§ã€ä¿®å¤åŒºåˆ†å¼€" },
    { value: "perfğŸ", name: "æ€§èƒ½: æå‡æ€§èƒ½" },
    { value: "testğŸ", name: "æµ‹è¯•: æ·»åŠ ä¸€ä¸ªæµ‹è¯•" },
    { value: "revertâª", name: "å›æ»š: ä»£ç å›é€€" },
    { value: "choreğŸ—¯", name: "å·¥å…·:å¼€å‘å·¥å…·å˜åŠ¨(æ„å»ºã€è„šæ‰‹æ¶å·¥å…·ç­‰)" },
  ],
  messages: {
    type: "é€‰æ‹©ä¸€ç§ä½ çš„æäº¤ç±»å‹:",
    customScope: "è¯·è¾“å…¥ä¿®æ”¹èŒƒå›´(å¯é€‰):",
    subject: "çŸ­è¯´æ˜:",
    body: 'é•¿è¯´æ˜ï¼Œä½¿ç”¨"|"æ¢è¡Œ(å¯é€‰)ï¼š',
    footer: "å…³è”å…³é—­çš„issueï¼Œä¾‹å¦‚ï¼š#31, #34(å¯é€‰):",
    confirmCommit: "ç¡®å®šæäº¤è¯´æ˜?",
  },
  allowCustomScopes: true,
  allowBreakingChanges: ["ç‰¹æ€§", "ä¿®å¤"],
  subjectLimit: 100,
};
```

æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ `git cz`æ¥è¿›è¡Œæäº¤ã€‚æˆ‘ä»¬å†ä¼˜åŒ–ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨`script`é…ç½®ä¸€ä¸‹è„šæœ¬å‘½ä»¤:

```json
  "scripts": {
   "commit": "git-cz"
  }
```

è‡³æ­¤æˆ‘ä»¬å·²ç»å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨`npm run commit`è¿›è¡Œæäº¤ã€‚

## ç»§ç»­ä¼˜åŒ–

å‡è®¾ç°åœ¨æœ‰ä¸¤ä¸ªç¨‹åºçŒ¿ï¼Œç¨‹åºçŒ¿ç”²æŸä¸€å¤©å¼€å‘äº†ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œç„¶åæ„‰å¿«åˆ©ç”¨å¦‚ä¸Šçš„æ­¥éª¤æäº¤äº†ï¼Œè¿‡äº†å‡ å¤©ï¼Œç¨‹åºçŒ¿ä¹™åœ¨ä»–çš„åŸºç¡€ä¸Šä¿®æ”¹äº†ä»£ç ï¼Œç„¶ååˆè¿›è¡Œäº†æäº¤ï¼Œåˆè¿‡äº†å‡ å¤©ï¼Œç¨‹åºçŒ¿ä¹™å› ä¸ºè·Ÿäº§å“ç»ç†åµäº†ä¸€æ¶ï¼Œæ„¤ç„¶ç¦»å»ã€‚æ¥ç€è¿™ä¸ªåŠŸèƒ½æ¨¡å—åªèƒ½ç”±ç¨‹åºçŒ¿ç”²æ¥è¿›è¡Œè¿­ä»£ç»´æŠ¤ã€‚äºæ˜¯åœ¨ä¸€ä¸ªç¾ä¸½çš„å‘¨ä¸€æ—©æ™¨ï¼Œç¨‹åºçŒ¿ç”²æ‰“å¼€ vscodeï¼Œæ‹‰å–äº†é¡¹ç›®ä»£ç ï¼Œæœ¬æƒ³æ„‰å¿«çš„è¿›è¡Œå¼€å‘ï¼Œä½†æ˜¯ä»–å‘ç°ä»–åŸæ¥çš„ä»£ç ï¼Œè¢«æ”¹å¾—é¢ç›®å…¨é:â€œæˆ‘è¿™é‡ŒåŸæ¥æ²¡æœ‰åˆ†å·å•Š...â€ã€â€œè¿™é‡ŒåŸæ¥éƒ½æ˜¯åŒå¼•å·å•Š...â€ã€‚ä»–é™·å…¥äº†å¯¹äººç”Ÿçš„æ€è€ƒã€‚é€šè¿‡ä¸Šé¢çš„ç®€çŸ­æ•…äº‹ï¼Œæˆ‘ä»¬äº†è§£åˆ°åœ¨è¿›è¡Œå›¢é˜Ÿåä½œå¼€å‘çš„æ—¶å€™ï¼Œç”±äºæ¯ä¸ªäººçš„ä»£ç éƒ½ä¸ç›¸åŒï¼Œä¸€åƒä¸ªå“ˆå§†é›·ç‰¹å°±å‡ºæ¥äº†ï¼Œä»£ç å˜å¾—è¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€äº›â€œè§„åˆ™â€æ¥çº¦æŸå›¢é˜Ÿæˆå‘˜ï¼Œè¾¾åˆ°ä¸€è‡´çš„é£æ ¼ã€‚
ä¸‹é¢å°±æ˜¯ä¸€å¥—â€œé™é¾™åå…«æŒâ€:

## eslint

ç¬¬ä¸€å¼: `eslint` : `npm install -D eslint`  
 `eslint` : æä¾›ç¼–ç è§„èŒƒï¼Œæä¾›è‡ªåŠ¨æ£€éªŒä»£ç çš„ç¨‹åºï¼Œå¹¶æ‰“å°æ£€éªŒç»“æœï¼šå‘Šè¯‰ä½ å“ªä¸€ä¸ªæ–‡ä»¶å“ªä¸€è¡Œä»£ç ä¸ç¬¦åˆå“ªä¸€æ¡ç¼–ç è§„èŒƒï¼Œæ–¹ä¾¿ä½ å»ä¿®æ”¹ä»£ç ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥åŠ ä»¥é…ç½®ã€‚æ¯”å¦‚:

```js
  //.eslintrc.js
   {
   "extends": ["airbnb", "plugin:prettier/recommended"], // eslintæ‰©å±•è§„åˆ™
   "parserOptions": {
       "ecmaVersion": 7,
       "sourceType": "module",
       "ecmaFeatures": {
       "jsx": true
       }
   },
   "parser": "babel-eslint",// è§£å†³ES6 improtä¼šæŠ¥é”™
   "env": { // egå¦‚æœä¸é…ç½®browserï¼Œwindowå°±ä¼šè¢«eslintæŠ¥undefinedçš„é”™
       "es6": true,
       "browser": true,
       "node": true
   },
   "plugins": ["react", "jsx-a11y", "import"],
   "rules": {
       "class-methods-use-this": 0,
       "import/no-named-as-default": 0,
       "react/jsx-filename-extension": [
       "error",
       {
           "extensions": [".js", ".jsx"]
       }
       ]
   }
}
```

åœ¨ eslint é‡Œé¢ï¼Œä½ å¯ä»¥çº¦æŸæ–‡ä»¶çš„è¡Œæ•°ã€å•è¡Œä»£ç çš„é•¿åº¦ï¼Œç”šè‡³æ˜¯å‡½æ•°çš„å¤æ‚åº¦ç­‰ç­‰ã€‚

## prettier

ç¬¬äºŒå¼:`prettier` : `npm install -D prettier`  
 `prettier` : ä»£ç æ ¼å¼åŒ–ã€‚
åˆ©ç”¨`prettier`å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„ä»£ç æ ¼å¼åŒ–ã€‚ä»æ­¤å†ä¹Ÿæ²¡æœ‰è¦ä¸è¦åˆ†å·çš„çº·äº‰äº†ã€‚ä¾‹å¦‚:

```js
//.prettierrc
    {
    "printWidth": 120, // ä¸€è¡Œæœ€å¤§å¤šå°‘å­—ç¬¦
    "tabWidth": 2, // tabå ç”¨çš„å­—ç¬¦æ•°
    "useTabs": false, // æ˜¯å¦ä½¿ç”¨tabä»£æ›¿ç©ºæ ¼
    "semi": true, // æ˜¯å¦æ¯å¥åéƒ½åŠ åˆ†å·
    "singleQuote": true, // æ˜¯å¦ä½¿ç”¨å•å¼•å·
    "jsxSingleQuote": false, // jsxæ˜¯å¦ä½¿ç”¨å•å¼•å·
    "trailingComma": "all", // æ•°ç»„å°¾é€—å·ã€‚
    "bracketSpacing": false, // {foo: xx}è¿˜æ˜¯{ foo: xx }
    "arrowParens": "always" //ç®­å¤´å¤´å‡½æ•°å‚æ•°æ˜¯å¦ä½¿ç”¨ï¼ˆï¼‰
    }
```

é‚£æœ‰äº†å¦‚ä¸Šä¸¤ä¸ªæŒæ³•ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å¾ˆå¥½çš„å®ç°ä»£ç æ ¼å¼ç»Ÿä¸€ï¼Œä½†æ˜¯åˆè¡ç”Ÿäº†ä¸€ä¸ªæ–°çš„é—®é¢˜:  
 å¼€å‘çš„æ—¶å€™ï¼Œä»€ä¹ˆæ—¶å€™è¿›è¡Œä»£ç çš„è§„åˆ™æ ¡éªŒå’Œæ ¼å¼åŒ–ç»Ÿä¸€å‘¢ï¼Ÿç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´æƒ³åˆ°äº†è§£å†³æ–¹æ³•:åœ¨è¿›è¡Œ`commit`çš„æ—¶å€™è¿›è¡Œæ ¡éªŒå’Œæ ¼å¼åŒ–ã€‚

æ­¤æ—¶å°±ç”¨åˆ°äº†ç¬¬ä¸‰å¼:`husky`  
 `husky` : [husky](https://github.com/typicode/husky)æ˜¯ä¸€ä¸ª npm åŒ…ï¼Œå®‰è£…åï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨ package.json é…ç½® git hook è„šæœ¬ã€‚
æˆ‘ä»¬åœ¨è¿™é‡Œè¦ç”¨åˆ°ä¸€ä¸ªä¸»è¦çš„é’©å­:`pre-commit`,è¿™ä¸ªé’©å­ä¼šåœ¨ä½ `commit`çš„æ—¶å€™æ‰§è¡Œä½ æƒ³è¦çš„æ“ä½œã€‚ä¾‹å¦‚:

```json
  "husky": {
   "hooks": {
     "pre-commit": "npm run lint"
   }
```

ä»¥ä¸Šä»£ç ï¼Œå½“ä½ åœ¨åç»­çš„æ¯ä¸€æ¬¡`git commit` ä¹‹å‰ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡å¯¹åº”çš„ hook è„šæœ¬ npm run lint ã€‚
æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æŠŠ`eslint`å’Œ`prettier`çš„æ“ä½œéƒ½æ”¾åœ¨`pre-commit`é’©å­é‡Œé¢å°±å¯ä»¥äº†:

```json
  "husky": {
   "hooks": {
     "pre-commit": "lint-staged"
   }
 },
 "lint-staged": {
   "*.{json,css,md}": [
     "npm run format",
     "git add"
   ],
   "*.scss": [
     "npm run lint:scss",
     "npm run format",
     "git add"
   ],
   "*.{js,vue,ts,tsx}": [
     "npm run lint",
     "npm run format",
     "git add"
   ]
 }
```

å¦‚ä¸Šï¼Œåœ¨æ¯ä¸€æ¬¡æäº¤ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½è¿›è¡Œäº† `eslint` çš„ä»£ç è§„åˆ™æ ¡éªŒå’Œ `prettier` çš„ä»£ç æ ¼å¼åŒ–ã€‚
ä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜è¿˜æ²¡è§£å†³ï¼Œå¾…æˆ‘ç»†ç»†é“æ¥ã€‚ç°åœ¨æˆ‘ä»¬å†åˆ°æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å†æ¬¡åˆ©ç”¨`git add .` å’Œ `git commit -m xxx` æ¥æäº¤ï¼Œç»“æœå‘ç°æäº¤ä»ç„¶é€šè¿‡äº†ï¼Œé‚£æˆ‘ä»¬ç°åœ¨æ—¢å¯ä»¥ç”¨`npm run commit`æ¥æäº¤ï¼Œä¹Ÿå¯ä»¥ç”¨åŸæ¥çš„å‘½ä»¤æ¥æäº¤ï¼Œé‚£æˆ‘ä»¬åŸæ¥æçš„è¿™ä¸€å¥—ä¸å°±æ˜¯ç™½è´¹äº†å—ï¼Ÿæˆ‘çš„æ„æ€æ˜¯æˆ‘ä»¬åº”è¯¥å¯¹`commit`è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœæ ¡éªŒä¸èƒ½é€šè¿‡ï¼Œé‚£æˆ‘ä»¬å°±ä¸å…è®¸ä»–`commit`ã€‚é‚£æˆ‘ä»¬ç»§ç»­å¾€ä¸‹æ“ä½œå§ã€‚

## commitlint å’Œ commitlint-config-cz

å®‰è£…`commitlint`å’Œ`commitlint-config-cz`:

```js
  npm install -D @commitlint/cli
  npm install -D commitlint-config-cz
```

åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»º `commitlint.config.js`:

```js
module.exports = {
  extends: ["cz"],
  rules: {
    "type-empty": [2, "never"], //ä¸å…è®¸æäº¤çš„ç±»å‹ä¸ºç©º
    "subject-empty": [2, "never"], //ä¸å…è®¸æäº¤çš„å†…å®¹ä¸ºç©º
  },
};
```

```json
"husky": {
   "hooks": {
     "commit-msg": "commitlint -E HUSKY_GIT_PARAMS", // åœ¨huskyçš„é…ç½®é‡Œé¢åŠ å…¥è¿™ä¸€å¥ï¼Œæ„æ€ä¸ºäº†åœ¨æäº¤å‰è¿›è¡Œæ ¡éªŒ
     "pre-commit": "lint-staged"
   }
 }
```

ç„¶åä½ å†å»ç”¨åŸæ¥çš„`git comiit -m xxx`å°±ä¼šå‘ç°æäº¤ä¸é€šè¿‡äº†ï¼Œæˆ‘ä»¬è¾¾åˆ°äº†æ ¡éªŒçš„ç›®çš„ã€‚è‡³æ­¤æˆ‘ä»¬å°±å®Œæˆå‰ç«¯æäº¤ä»£ç çš„è§„èŒƒå•¦ï½

## æ€»ç»“

æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æäº¤çš„æµç¨‹å›¾:

![æœªå‘½åæ–‡ä»¶.png](https://user-gold-cdn.xitu.io/2019/12/8/16ee4a036735c758?w=1086&h=594&f=png&s=25699)

é€šè¿‡`commitizen`ã€`cz-customizable`ã€`eslint`ã€`prettier`ã€`husky`ã€`commitlint`æˆ‘ä»¬å®Œæ•´çš„çº¦æŸäº†æäº¤çš„æµç¨‹ï¼Œä¿è¯äº†ä»£ç çš„ç»Ÿä¸€ï¼Œæé«˜äº†ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¸ºåæœŸçš„å·¥ä½œèŠ‚çœäº†å¾ˆå¤šæ—¶é—´ï¼Œåˆå¯ä»¥çœå‡ºå¾ˆå¤šæ—¶é—´å»å‹¾æ­å°å§å§äº† ğŸ˜
